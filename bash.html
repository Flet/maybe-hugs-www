<!DOCTYPE html>
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans" />
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Droid+Sans+Mono" />
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/octicons/3.0.1/octicons.min.css"/>
<link rel="stylesheet" type="text/css" href="main.css" />
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/styles/tomorrow-night-eighties.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script>
<body>
  <div id="container"><banner>
  <a href="index.html">maybehug.me</a>
</banner>
  <nav>
  <a href="bash.html">bash</a>
  <a href="c.html">c++</a>
  <a href="clojure.html">clojure</a>
  <a href="go.html">go</a>
  <a href="haskell.html">haskell</a>
  <a href="hy.html">hy</a>
  <a href="java.html">java</a>
  <a href="javascript.html">javascript</a>
  <a href="perl.html">perl</a>
  <a href="perl6.html">perl6</a>
  <a href="php.html">php</a>
  <a href="python.html">python</a>
  <a href="ruby.html">ruby</a>
  <a href="rust.html">rust</a>
  <a href="scala.html">scala</a>
</nav>
    <main>
      <h2 id="bash">bash</h2>
<h3 id="hug">hug</h3>
<pre><code>#!/bin/bash

set -e

if [[ -z "$*" ]]; then
cat - &lt;&lt;USAGE
Usage: $0 &lt;name...&gt;

Set environment variable $&lt;name&gt;_HUGGABLE to define if a cutie should be hugged.
A value of 1 means the cutie would like hugs. If the variable is not set, or set
to any other variable, it is assumed the cutie would prefer empathy.
USAGE
exit 1
fi

for CUTIE in "$@"; do
    # Replace spaces with underscores and transform chracters to uppercase.
    CUTIE_NAME=${CUTIE// /_}
    CUTIE_NAME=$(echo $CUTIE_NAME | awk '{print toupper($0)}')

    # Set $HUGGABLE based on the cutie name suffixed with '_HUGGABLE'.
    eval HUGGABLE=\$"${CUTIE_NAME}_HUGGABLE"

    if [[ ! -z "$HUGGABLE" ]] &amp;&amp; [[ "$HUGGABLE" = 1 ]]; then
        echo "Hugs for $CUTIE!"
    else
        echo "Empathy for $CUTIE!"
    fi
done
</code></pre><h3 id="hug-bats">hug.bats</h3>
<pre><code class="hljs bats">#!/usr/bin/env bats

@test "Cutie who would like hugs recives hugs" {
    export SAM_HUGGABLE=1
    [[ "$("$BATS_TEST_DIRNAME/hug" sam)" = "Hugs for sam!" ]]
}

@test "Cutie who would like empathy recives empathy" {
    export SKY_HUGGABLE=0
    [[ "$("$BATS_TEST_DIRNAME/hug" sky)" = "Empathy for sky!" ]]
}

@test "Cutie who has not expressed a preference recives empathy" {
    [[ "$("$BATS_TEST_DIRNAME/hug" sue)" = "Empathy for sue!" ]]
}

@test "Cutie with a long name can be hugged" {
    export A_CUTIE_HUGGABLE=1
    [[ $("$BATS_TEST_DIRNAME/hug" "a cutie") = "Hugs for a cutie!" ]]
}

@test "Usage information is shown" {
    run "$BATS_TEST_DIRNAME/hug"
    [[ $status -eq 1 ]]
    [[ "${lines[0]}" = "Usage: $BATS_TEST_DIRNAME/hug &lt;cutie...&gt;" ]]
}
</code></pre>

    </main>
    <footer>
        <a href="https://github.com/zkat/maybe-hugs">
          <span class="mega-octicon octicon-mark-github"></span>
        </a>
        <a href="http://creativecommons.org/publicdomain/zero/1.0/">
          <img src="https://camo.githubusercontent.com/c5160f944848828fa33126d9a697e9abe43ea98f/687474703a2f2f692e6372656174697665636f6d6d6f6e732e6f72672f702f7a65726f2f312e302f38387833312e706e67"/>
        </a>
    </footer>
  </div>
</body>
