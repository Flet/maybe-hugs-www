<!DOCTYPE html>
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans" />
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Droid+Sans+Mono" />
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/octicons/3.0.1/octicons.min.css"/>
<link rel="stylesheet" type="text/css" href="main.css" />
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/styles/tomorrow-night-eighties.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script>
<body>
  <div id="container"><banner>
  <a href="index.html">maybehug.me</a>
</banner>
  <nav>
  <a href="c.html">c++</a>
  <a href="clojure.html">clojure</a>
  <a href="go.html">go</a>
  <a href="haskell.html">haskell</a>
  <a href="hy.html">hy</a>
  <a href="java.html">java</a>
  <a href="javascript.html">javascript</a>
  <a href="perl.html">perl</a>
  <a href="perl6.html">perl6</a>
  <a href="php.html">php</a>
  <a href="python.html">python</a>
  <a href="ruby.html">ruby</a>
  <a href="rust.html">rust</a>
  <a href="scala.html">scala</a>
</nav>
    <main>
      <h2 id="perl6">perl6</h2>
<h2 id="maybe-hugs">Maybe-Hugs</h2>
<pre><code class="hljs perl6">use Test;
need Cutie;
use Maybe::Hug;

role Huggable does Cutie {
  has Bool $.hug-ok is rw = False;
  method accept-hugs() { $.hug-ok }
}

role AlternatingHuggable does Cutie {
  has $!hugs = 0;
  method accept-hugs() { Bool(++$!hugs % 2) }
}

my Cutie $alice = &quot;Alice&quot; does Huggable(:hug-ok);
my Cutie $betty = &quot;Betty&quot; does Huggable;
my Cutie $carol = &quot;Carol&quot; does AlternatingHuggable;
my $elision = &quot;Elision&quot;;

plan 6;

ok maybe-hug($alice), &quot;$alice Hugs&quot;;

ok !maybe-hug($betty), &quot;$betty Didn&#39;t positively affirm huggability, so no hugs&quot;;

ok maybe-hug($carol), &quot;$carol wants one this time&quot;;
ok !maybe-hug($carol), &quot;$carol doesn&#39;t now though&quot;;

throws-like { maybe-hug $elision }, X::TypeCheck, &quot;$elision doesn&#39;t even&quot;;

$alice.hug-ok = False;
ok !maybe-hug($alice), &quot;$alice changed her mind&quot;;
</code></pre>
<h3 id="meta-info">META.info</h3>
<pre><code class="hljs info">{
    &quot;name&quot;        : &quot;Maybe::Hugs&quot;,
    &quot;version&quot;     : &quot;1.0.0&quot;,
    &quot;description&quot; : &quot;Conditional hugging implementation for Perl6&quot;,
    &quot;provides&quot;    : {
        &quot;Maybe::Hug&quot; : &quot;lib/Maybe/Hug.pm&quot;,
        &quot;Cutie&quot;      : &quot;lib/Cutie.pm&quot;
    },
    &quot;author&quot;      : &quot;Rebecca Turner&quot;,
    &quot;depends&quot;     : [],
    &quot;source-type&quot; : &quot;git&quot;,
    &quot;source-url&quot;  : &quot;git://github.com/zkat/maybe-hugs.git&quot;
}
</code></pre>
<h3 id="lib-cutie-pm">lib/Cutie.pm</h3>
<pre><code class="hljs pm">role Cutie {
  method accept-hugs { â€¦ }
}
</code></pre>
<h3 id="lib-maybe-hug-pm">lib/Maybe/Hug.pm</h3>
<pre><code class="hljs pm">class Maybe::Hug {
  has $.cutie where { .can(&#39;accept-hugs&#39;) };
  method hug { $.cutie.accept-hugs() ?? &quot;HUG!&quot; but True !! &quot;Empathy!&quot; but False }
}

sub maybe-hug($cutie) is export { Maybe::Hug.new(:$cutie).hug() }
</code></pre>
<h3 id="t-basic-t">t/basic.t</h3>
<pre><code class="hljs t">use Test;
need Cutie;
use Maybe::Hug;

role Huggable does Cutie {
  has Bool $.hug-ok is rw = False;
  method accept-hugs() { $.hug-ok }
}

role AlternatingHuggable does Cutie {
  has $!hugs = 0;
  method accept-hugs() { Bool(++$!hugs % 2) }
}

my Cutie $alice = &quot;Alice&quot; does Huggable(:hug-ok);
my Cutie $betty = &quot;Betty&quot; does Huggable;
my Cutie $carol = &quot;Carol&quot; does AlternatingHuggable;
my $elision = &quot;Elision&quot;;

plan 6;

ok maybe-hug($alice), &quot;$alice Hugs&quot;;

ok !maybe-hug($betty), &quot;$betty Didn&#39;t positively affirm huggability, so no hugs&quot;;

ok maybe-hug($carol), &quot;$carol wants one this time&quot;;
ok !maybe-hug($carol), &quot;$carol doesn&#39;t now though&quot;;

throws-like { maybe-hug $elision }, X::TypeCheck, &quot;$elision doesn&#39;t even&quot;;

$alice.hug-ok = False;
ok !maybe-hug($alice), &quot;$alice changed her mind&quot;;
</code></pre>

    </main>
    <footer>
        <a href="https://github.com/zkat/maybe-hugs">
          <span class="mega-octicon octicon-mark-github"></span>
        </a>
        <a href="http://creativecommons.org/publicdomain/zero/1.0/">
          <img src="https://camo.githubusercontent.com/c5160f944848828fa33126d9a697e9abe43ea98f/687474703a2f2f692e6372656174697665636f6d6d6f6e732e6f72672f702f7a65726f2f312e302f38387833312e706e67"/>
        </a>
    </footer>
  </div>
</body>
